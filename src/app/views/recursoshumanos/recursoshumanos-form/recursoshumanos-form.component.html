
<perfect-scrollbar>
  <div class="card-body" style=" margin-right: 5%; margin-left: 5%;">
  <div class=" mt-2">
    <h2 class="title row ">{{title}}</h2>
    <div class=" pl-1">{{subtitle}}</div>
    <br />
    <app-form (saveEvent)="save()" [formGroup]="formGroup">
      <div class="form-body">
        <input type="hidden" formControlName="id" />
        <div class="row">
          <div class="col-6">
            <app-text-box [class]="'col-lg-10 col-md-10 col-sm-10'" [labelName]="'Nombre'" [submitted]="submitted"
              [controlName]="'nombre'" [form]="formGroup"[errorPattern]="'El valor ingresado no es un valor alfabético válido'">
            </app-text-box>
          </div>
          <div class="col-6">
            <app-text-box [class]="'col-lg-10 col-md-10 col-sm-10'" [labelName]="'Apellido'" [submitted]="submitted"
              [controlName]="'apellido'" [form]="formGroup" [errorPattern]="'El valor ingresado no es un valor alfabético válido'">
            </app-text-box>
          </div>
        </div>
        <div class="row">
          <div class="col-6">
            <app-text-box [class]="'col-lg-10 col-md-10 col-sm-10'" [labelName]="'CUIL'" [submitted]="submitted" [errorPattern]= "'Solo debe contener números y comenzar con 20, 23, 27, 30 o 33'"
              [controlName]="'cuil'" [form]="formGroup">
            </app-text-box>
          </div>
          <div class="col-6">
            <app-text-box [class]="'col-lg-10 col-md-10 col-sm-10'" [labelName]="'Teléfono'" [submitted]="submitted"
              [controlName]="'telefono'" [form]="formGroup" [errorPattern]="'El valor ingresado no es un valor numérico válido'">
            </app-text-box>
          </div>
        </div>
        <div class="row">
          <div class="col-6">
            <app-text-box [class]="'col-lg-10 col-md-10 col-sm-10'" [labelName]="'Email'" [submitted]="submitted"
              [controlName]="'email'" [form]="formGroup">
            </app-text-box>
          </div>
          <div class="col-lg-6 col-md-6 col-sm-6 col-6">
            <app-datepicker [labelName]="'Fecha Nacimiento'" [submitted]="submitted" [controlName]="'fechaNacimiento'"
              [class]="'col-lg-10 col-md-10 col-sm-10'" [form]="formGroup" [errorDate]= "'Formato de fecha inválido'">
            </app-datepicker>
          </div>
        </div>
        <div class="row">
          <div class="col-6">
            <app-text-box [class]="'col-lg-10 col-md-10 col-sm-10'" [labelName]="'Direccion'" [submitted]="submitted"
              [controlName]="'direccion'" [form]="formGroup">
            </app-text-box>
          </div>
          <div class="col-6">
            <app-text-box [class]="'col-lg-10 col-md-10 col-sm-10'" [labelName]="'Número Legajo'"
              [submitted]="submitted" [controlName]="'nroLegajo'" [form]="formGroup">
            </app-text-box>
          </div>
        </div>
        <div class="row ml-0 mb-5  ">
          <div>
            <mat-checkbox [disabled]="serviciosAsignados" [checked]="multiservicio" labelPosition="before"
              (change)="onMultiservicioChange($event.checked)">Puede ser usado en múltiples servicios al mismo tiempo?
            </mat-checkbox>

            <ngb-alert *ngIf="serviciosAsignados" type="warning" [dismissible]="false" >
              Un recurso asignado a mas de un servicio no puede dejar de ser multiservicio
            </ngb-alert>

          </div>
        </div>
        <div class="row">
          <div class="col-6 col-md-6 col-sm-6">
            <h5 style="margin-top: 10px;">
              Seleccione Foto de Perfil:
            </h5>
            <input type="file" accept=".png, .jpg" (change)="onUpload($event)">
            <mat-progress-bar class="mt-2" mode="determinate" [value]="uploadPercent | async"></mat-progress-bar>
            <div class="mt-2">
              <div *ngIf="finalizando">
                Espere... {{porcentaje}}
              </div>
              <div *ngIf="completado">
                Espere...Listo!
              </div>
            </div>
          </div>
          <div class="col-lg-6 col-md-6 col-sm-6">
            <img class="img-circle" style="margin-left: 20%;" [src]="imagen" width="200" height="200" />
          </div>
        </div>
        <div class="row ml-0 mb-5  ">
          <button mat-dialog-close="true" type="submit" [disabled]="formGroup.invalid"
            class="btn btn-primary col-lg-3 col-md-4 col-sm-6">{{button}}
            <i class="material-icons f-right">{{icon}}</i>
          </button>
          <button mat-dialog-close="true" class="btn btn-default ml-2 col-3"> Cancelar <i
              class="material-icons f-right">cancel</i></button>
        </div>
      </div>

    </app-form>
  </div>
</div>
</perfect-scrollbar>
